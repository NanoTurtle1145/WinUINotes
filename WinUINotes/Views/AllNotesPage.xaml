<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="WinUINotes.Views.AllNotesPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WinUINotes.Views"
	xmlns:models="using:WinUINotes.Models"
	xmlns:constants="using:WinUINotes"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
<Page.Resources>
		<DataTemplate x:Key="NoteItemTemplate" 
              x:DataType="models:Note">
			<ItemContainer CornerRadius="{StaticResource OverlayCornerRadius}">
				<Grid Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
              BorderThickness="1" 
              BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
              CornerRadius="{StaticResource OverlayCornerRadius}">
					<Grid.RowDefinitions>
						<RowDefinition Height="120"/>
						<RowDefinition Height="Auto"/>
					</Grid.RowDefinitions>
					<TextBlock Text="{x:Bind Text}" 
                           Margin="12,8"
                           TextWrapping="Wrap"
                           TextTrimming="WordEllipsis"/>
					<Border Grid.Row="1" 
                        Padding="8,6,0,6"
                        Background="{ThemeResource SubtleFillColorSecondaryBrush}">
						<TextBlock Text="{x:Bind Date}" 
                               Style="{StaticResource CaptionTextBlockStyle}"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
					</Border>
				</Grid>
			</ItemContainer>
		</DataTemplate>
</Page.Resources>
	<NavigationView x:Name="MainNav" IsBackEnabled="False" IsSettingsVisible="False">
		<NavigationView.MenuItems>
			<NavigationViewItem Icon="Document" Content="所有笔记" IsSelected="True"/>
			<NavigationViewItem Icon="Folder" Content="分类"/>
		</NavigationView.MenuItems>
		<NavigationView.FooterMenuItems>
			<NavigationViewItem Icon="Setting" Content="设置"/>
		</NavigationView.FooterMenuItems>

		<NavigationView.Content>
			<Grid x:Name="rootPanel">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<CommandBar DefaultLabelPosition="Right">
					<AppBarButton Icon="Add" Label="新笔记"
                  Click="NewNoteButton_Click"/>
					<AppBarButton Icon="More" Label="关于"
					  Click="AppBarButton_Click"/>
					<CommandBar.Content>
						<TextBlock Text="{x:Bind constants:Constants.AppName}" Margin="16,8" 
                   Style="{ThemeResource SubtitleTextBlockStyle}"/>
					</CommandBar.Content>
				</CommandBar>

				<ItemsView ItemsSource="{x:Bind notesModel.Notes}" 
               Grid.Row="1" Margin="24" 
               ItemTemplate="{StaticResource NoteItemTemplate}"
               IsItemInvokedEnabled="True"
               ItemInvoked="ItemsView_ItemInvoked">
					<ItemsView.Layout>
						<UniformGridLayout MinItemWidth="200"
                           MinColumnSpacing="12"
                           MinRowSpacing="12"
                           ItemsJustification="Start"/>
					</ItemsView.Layout>
				</ItemsView>
			</Grid>
		</NavigationView.Content>
	</NavigationView>
</Page>
